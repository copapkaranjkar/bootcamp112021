<apex:page standardController="Contact" extensions="tdc_tua.SendEmail" sidebar="false" recordSetVar="sendRecords" standardStylesheets="true" docType="html-5.0">
    <html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <apex:slds />
        <style type="text/css">
            .disabled{
                overflow: hidden;
                width: 100%;
                display: block;
                background-color: #eee !important;
            }
            .disabledText{
                cursor: not-allowed;
                display: block;
                min-height: 150px;
                width: 100% !important;
                background-color: #eee !important;
                overflow: auto;
            }
        </style>
        <c:SendEmail_CSS />
    </head>
    <body>
            <div class="slds-scope wrapper">
                <apex:form >
    
                    <apex:actionStatus id="sts">
                        <apex:facet name="start">
                            <div class="spinnerGo">
                                  <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_inverse">
                                        <span class="slds-assistive-text">Loading</span>
                                        <div class="slds-spinner__dot-a"></div>
                                        <div class="slds-spinner__dot-b"></div>
                                  </div>
                            </div>
                        </apex:facet>
                    </apex:actionStatus>
                    <apex:pageMessages ></apex:pageMessages>
                    <!-- <apex:sectionHeader Subtitle="Send an Email" title="Task"/> -->
                    <!-- Form of Sending Email -->
                    <apex:outputPanel id="pb">
                            <div class="headding">
                                <h2>Send Email</h2>
                            </div> 
                            <div class="cover slds-form slds-form_horizontal">
                                <apex:outputPanel id="listingSearchResultsPanel">
                                <!-- <apex:inputTextarea value="{!templatebody}" label="Body" cols="80" rows="15"/>  -->
                                </apex:outputPanel>
                             
                                <!-- <apex:commandButton value="Email All" action="{!SendEmailAll}"/> -->
                                <div class="slds-form-element" style="text-align:left;">
                                    You currently have {!lstId.size} recipient(s) selected to receive this email. 
                                </div>
                                <!-- 
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label">Bcc</label>
                                    <div class="slds-form-element__control">
                                      <apex:inputTextarea value="{!Bcc}" label="Bcc" cols="80" rows="3" styleClass="slds-textarea"/>
                                    </div>
                                </div>
                                 -->
                                <!-- <apex:inputTextarea value="{!To}" label="To" cols="80" rows="3" /> -->
                                
                                <apex:outputpanel id="sub_panel">
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">Select Folder</label>
                                        <div class="slds-form-element__control">
                                            <apex:selectList size="1" value="{!selectedFolder}" styleClass="slds-select">
                                               <apex:actionSupport event="onchange" action="{!refreshEmailTemplate}" status="sts" rerender="listingSearchResultsPanel1,sub_panel"  />
                                                <apex:selectOptions value="{!folders}" />
                                            <!-- </apex:actionSupport> -->
                                            </apex:selectList> 
                                        </div>
                                    </div>
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">Select Template</label>
                                        <div class="slds-form-element__control">
                                            <apex:selectList size="1" value="{!selectedItem}" styleClass="slds-select">
                                               <apex:actionSupport event="onchange" action="{!showContent}" status="sts" rerender="listingSearchResultsPanel1,sub_panel" immediate="false" />
                                                <apex:selectOptions value="{!MyPersonalTemplateOptions}" />
                                            <!-- </apex:actionSupport> -->
                                            </apex:selectList>
                                        </div>
                                    </div>
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">Subject</label>
                                        <div class="slds-form-element__control">
                                            <apex:outputText value="{!Subject}"  styleClass="slds-input disabled" />
                                        </div>
                                    </div>
                                </apex:outputpanel>
                                <apex:outputPanel id="listingSearchResultsPanel1">
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">Body</label>
                                        <div class="slds-form-element__control">
                                            <apex:outputText value="{!EmailBody}" styleClass="slds-textarea disabledText" escape="false"/>
                                        </div>
                                    </div>
                               </apex:outputPanel>
                               <div class="slds-form-element">
                                    <label class="slds-form-element__label"></label>
                                    <div class="slds-form-element__control ">
                                        <apex:commandButton value="Send" action="{!SendEmail1}" styleClass="slds-button slds-button_brand"/>
                                        <apex:commandButton value="Cancel" action="{!Cancel}" styleClass="slds-button slds-button_neutral"/>
                                    </div>
                                </div>
                            </div>
                            
                    </apex:outputPanel>
                </apex:form>
            </div>
    </body>
    </html>
</apex:page>